{% comment %}
Allow to customize the menu that appears at the top of every Evennia
webpage. Copy this file to your game dir's web/website
folder and edit it to add/remove links to the menu.
{% endcomment %}
{% load static %}
<nav class="navbar navbar-dark font-weight-bold navbar-expand-md" style="background: transparent !important; border-bottom: 6px solid; border-image: linear-gradient(90deg, #ff00cc, #a020f0) 1; box-shadow: 0 0 24px #00fff7, 0 0 8px #ff00cc;">
  <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#menu-content"
    aria-controls="menu-content" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <a class="navbar-brand w-100 text-center" href="/" style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
    <img class="navbar-brand-logo mb-2" src="{% static "website/images/logo.png" %}" alt="{{game_name}} logo" style="display: block; margin: 0 auto;" />
    <div style="font-size: 2rem; font-weight: bold; color: #00fff7; text-shadow: 0 0 8px #00fff7;">{{ game_name }}</div>
    <div style="font-size: 1.1rem; color: #a020f0; text-shadow: 0 0 6px #ff00cc;">{{game_slogan}}</div>
  </a>
</nav>
<div style="width: 100%; height: 12px; background: linear-gradient(90deg, #a020f0 0%, #ff00cc 100%); margin-bottom: 24px; box-shadow: 0 0 12px #a020f0; border-radius: 0 0 8px 8px;"></div>

  <div class="collapse navbar-collapse" id="menu-content">
    <ul class="navbar-nav">
      {% block navbar_left %}
      <li>
        <a class="nav-link" href="{% url 'index' %}">Home</a>
      </li>
      <!-- game views -->
      {% if account %}
      <li><a class="nav-link" href="{% url 'discourse-session-sync' %}" target="_top">Forum</a></li>
      {% else %}
      <!-- Forum link for non-logged-in users removed -->
      {% endif %}
      <li><a class="nav-link" href="{% url 'help' %}">Help</a></li>
      <!-- end game views -->

      {% if user.is_staff %}
      <li><a class="nav-link" href="{% url 'characters' %}">Characters</a></li>
      <li><a class="nav-link" href="{% url 'channels' %}">Channels</a></li>
      <li><a class="nav-link" href="{% url 'admin:index' %}">Admin</a></li>
      {% if rest_api_enabled %}
      <li><a class="nav-link" href="/api">API</a></li>
      {% endif %}
      {% endif %}

      {% if webclient_enabled %}
      <li><a class="nav-link" href="{% url 'webclient:index' %}">Play Online</a></li>
      {% endif %}
      {% endblock %}
    </ul>
    <ul class="nav navbar-nav ml-auto w-120 justify-content-end">
      {% block navbar_right %}
      {% endblock %}

      {% block navbar_user %}
      {% if account %}
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" id="user_options" aria-expanded="false">
          Logged in as {{ account.username }} <span class="caret"></span>
        </a>
        <div class="dropdown-menu" aria-labelledby="user_options">
          {% if not account.at_character_limit %}
          <a class="dropdown-item" href="{% url 'character-create' %}">Decant Sleeve</a>
          {% endif %}
          <a class="dropdown-item" href="{% url 'character-manage' %}">Manage Sleeves</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="{% url 'password_change' %}">Change Password</a>
          <form method="post" action="{% url 'logout' %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="dropdown-item">Log Out</button>
          </form>
        </div>
      </li>
      <li>
        <form method="post" action="{% url 'logout' %}" style="display:inline;">
          {% csrf_token %}
          <button type="submit" class="nav-link btn btn-link">Log Out</button>
        </form>
      </li>
      {% else %}
      <li>
        <a class="nav-link" href="{% url 'login' %}?next={{ request.path }}">Log In</a>
      </li>
      {% if register_enabled %}
      <li>
        <a class="nav-link" href="{% url 'register' %}">Register</a>
      </li>
      {% endif %}
      {% endif %}
      {% endblock %}
    </ul>
  </div>
</nav>
